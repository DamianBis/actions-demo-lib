
on:
  workflow_call:
    inputs:
      repo:
        required: true
        type: string
      workflow_revision:
        required: true
        type: string
      dockerfile:
        required: false
        type: string
    secrets:
      envPAT:
        required: true

jobs:
  do-build:
    permissions: write-all
    uses: DamianBis/actions-demo-lib/.github/workflows/buildImage.yaml
    with:
      repo: ${{ inputs.repo }}
    secrets:
      envPAT: ${{ secrets.envPAT }}

  post-build-checks:
    needs: do-build
    permissions: write-all
    uses: DamianBis/actions-demo-lib/.github/workflows/buildChecks.yaml